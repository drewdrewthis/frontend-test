"use strict";function getData(){return $.ajax({dataType:"json",url:"https://www.deskbookers.com/nl-nl/sajax.json?q=Amsterdam&type=-&people=any&favorite=0&pid=&sw=52.293753%2C4.634942&ne=52.455562%2C5.162286&ids=17201%2C19640%2C13692%2C13691%2C12136%2C17938%2C15292%2C14886%2C14885%2C14884%2C14883%2C15730%2C15353%2C15351%2C15330%2C15080%2C17290%2C15454%2C15451%2C15379"})}function createCarousel(t,e){function n(){var t='\n\t\t\t<div class="control-wrapper left">\n\t\t\t\t<div class="control left-control">\n\t\t\t\t\t<i class="fa fa-chevron-left" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="control-wrapper right">\n\t\t\t\t<div class="control right-control">\n\t\t\t\t\t<i class="fa fa-chevron-right" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t';i.append(t),i.find(".right-control").on("click",function(){i.nextImage()}),i.find(".left-control").on("click",function(){i.prevImage()})}var i=$(t);return i.current_image_index=0,i.images=e,i.goToImage=function(t){$(".carousel-item").fadeOut(2e3),$('.carousel-item[data-id="'+t+'"]').fadeIn(2e3),0===i.images.length?i.find(".control").hide():i.find(".control").show()},i.updateSlides=function(t,e){i.images=t,i.find("ul").html(""),t.forEach(function(t,n){"string"==typeof t&&i.find("ul").append('<li \n                \tid="image-'+n+'" \n\t\t\t\t\tdata-id="'+n+'" \n\t\t\t\t\tclass="carousel-item" \n\t\t\t\t\tstyle="background-image:url(\''+t+'\')">\n\t\t\t\t\t\t<h1 class="headline">'+(e[n]||"Headline Goes Here")+"</h1>\n\t\t\t\t\t</li>\n\t\t\t\t")}),i.goToImage(0)},i.nextImage=function(){i.images[i.current_image_index+1]?i.goToImage(++i.current_image_index):(i.goToImage(0),i.current_image_index=0)},i.prevImage=function(){i.images[i.current_image_index-1]?i.goToImage(--i.current_image_index):(i.goToImage(i.images.length-1),i.current_image_index=i.images.length-1)},n(),i.append("<ul></ul>"),i.updateSlides(e,["Fast, Easy, Flexible","Book one of our spaces"]),setInterval(function(){i.is(":hover")||i.nextImage()},6e3),i}function predictSearch(t){var e=app.model.rows;e.sort(function(t,e){return t.name.localeCompare(e.name)});var n=e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});fillPredictor(".predictive-results",n.slice(0,5))}function fillPredictor(t,e){var n=$(t);n.html(""),console.log(e);var i=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;n.append('\n\t\t\t<li data-id="'+l.location_id+'" \n\t\t\t\tclass="predictive-item"\n\t\t\t\tdata-name="'+l.name+'">'+l.name+"</li>")}}catch(c){o=!0,a=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw a}}console.log("name"),$(".predictive-item").on("click",function(){var t=$(this).data("name");console.log(t),$('#location-search-form input[type="text"]').val(t)})}function processSearch(t){console.log(t),$('#location-search-form input[type="text"]').val("")}function updateResults(t){t.map(function(t,e){var n=t.name,i=t.location_name,o=t.rating||"-",a=t.day_price?"$"+t.day_price+"/day":"",r=t.image_urls2[0];$(".results-list").append('<li \n        \tid="location-'+e+'" \n        \tclass="result-item" \n        \tstyle="background-image:url(\''+r+'\')">\n\t\t\t\t<ul class="location-info">\n\t\t\t\t\t<li>'+n+"</li>\n\t\t\t\t\t<li>"+i+"</li>\n\t\t\t\t\t<li>Score: "+o+"</li>\n\t\t\t\t\t<li>"+a+"</li>\n\t\t\t\t</ul>\n\t\t\t</li>")})}function setEventHandlers(){$("#location-search-form").submit(function(t){var e=$('input[type="text"]').val();t.preventDefault(),console.log(e),processSearch(e),$('input[type="text"]').val("")}),$('#location-search-form input[type="text"]').focus(function(){$('#location-search-form input[type="text"]').keydown(function(t){var e=$('#location-search-form input[type="text"]').val();console.log(e),predictSearch(e),$(".predictive-box").show()})}),$('#location-search-form input[type="text"]').focus(function(){$('#location-search-form input[type="text"]').keydown(function(t){var e=$('#location-search-form input[type="text"]').val();console.log(e),predictSearch(e),$(".predictive-box").show()})}),$('#location-search-form input[type="text"]').focusout(function(){$(".predictive-box").hide()}),$(".predictive-item").on("click",function(){$(".predictive-results").html(""),processSearch($(this).data("name")),$(".predictive-box").hide()})}function setDimensionsForResponsiveElements(){$("ul.results-list").css("width",window.innerWidth/5*$(".result-item").length+"px")}var max_results=20,app={init:function(){if(sessionStorage.getItem("location_data")){var t=sessionStorage.getItem("location_data");app.model=JSON.parse(t),app.setUp()}else app.setData()},setData:function(){$.when(getData()).then(function(t){console.log("Retrieved data",t),sessionStorage.setItem("location_data",JSON.stringify(t)),app.model=t,init()})},setUp:function(){var t=app.model,e=t.rows.slice(0,Math.min(max_results,t.rows.length-1)),n=t.rows.reduce(function(t,e){return t.concat(e.image_urls)},[]);console.log(n[0].length),app.main_carousel=createCarousel("carousel",n),updateResults(e),setEventHandlers(),setDimensionsForResponsiveElements()}};$(document).ready(function(){app.init()}),$(window).resize(function(){setDimensionsForResponsiveElements()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJnZXREYXRhIiwiJCIsImFqYXgiLCJkYXRhVHlwZSIsInVybCIsImNyZWF0ZUNhcm91c2VsIiwiZWxlbWVudCIsImltYWdlX2FyciIsImNyZWF0ZUNvbnRyb2xzIiwidGVtcGxhdGUiLCIkY2Fyb3VzZWwiLCJhcHBlbmQiLCJmaW5kIiwib24iLCJuZXh0SW1hZ2UiLCJwcmV2SW1hZ2UiLCJjdXJyZW50X2ltYWdlX2luZGV4IiwiaW1hZ2VzIiwiZ29Ub0ltYWdlIiwiaW5kZXgiLCJmYWRlT3V0IiwiZmFkZUluIiwibGVuZ3RoIiwiaGlkZSIsInNob3ciLCJ1cGRhdGVTbGlkZXMiLCJzbGlkZXMiLCJoZWFkbGluZXMiLCJodG1sIiwiZm9yRWFjaCIsInNldEludGVydmFsIiwiaXMiLCJwcmVkaWN0U2VhcmNoIiwic3RyIiwibG9jYXRpb25zIiwiYXBwIiwibW9kZWwiLCJyb3dzIiwic29ydCIsImEiLCJiIiwibmFtZSIsImxvY2FsZUNvbXBhcmUiLCJyZXN1bHRzIiwiZmlsdGVyIiwicGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZmlsbFByZWRpY3RvciIsInNsaWNlIiwiYXJyIiwiJHByZWRpY3RvciIsImNvbnNvbGUiLCJsb2ciLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsImxvY2F0aW9uIiwidmFsdWUiLCJsb2NhdGlvbl9pZCIsImVyciIsInRoaXMiLCJkYXRhIiwidmFsIiwicHJvY2Vzc1NlYXJjaCIsInVwZGF0ZVJlc3VsdHMiLCJtYXAiLCJ3b3JrcGxhY2UiLCJsb2NhdGlvbl9uYW1lIiwicmV2aWV3X3Njb3JlIiwicmF0aW5nIiwicHJpY2UiLCJkYXlfcHJpY2UiLCJpbWFnZV91cmwiLCJpbWFnZV91cmxzMiIsInNldEV2ZW50SGFuZGxlcnMiLCJzdWJtaXQiLCJlIiwic2VhcmNoX2lucXVpcnkiLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwia2V5ZG93biIsImZvY3Vzb3V0Iiwic2V0RGltZW5zaW9uc0ZvclJlc3BvbnNpdmVFbGVtZW50cyIsImNzcyIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJtYXhfcmVzdWx0cyIsImluaXQiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJkYXRhU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwic2V0VXAiLCJzZXREYXRhIiwid2hlbiIsInRoZW4iLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiTWF0aCIsIm1pbiIsIm1haW5faW1hZ2VzIiwicmVkdWNlIiwiYWxsX2ltYWdlcyIsImNvbmNhdCIsImltYWdlX3VybHMiLCJtYWluX2Nhcm91c2VsIiwiZG9jdW1lbnQiLCJyZWFkeSIsInJlc2l6ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxXQUNMLE1BQU9DLEdBQUVDLE1BQ0xDLFNBQVUsT0FDVkMsSUFBSyxpVEFJYixRQUFTQyxnQkFBZUMsRUFBU0MsR0FNN0IsUUFBU0MsS0FDTCxHQUFJQyxHQUFBQSxxWEFhSkMsR0FBVUMsT0FBT0YsR0FFakJDLEVBQVVFLEtBQUssa0JBQWtCQyxHQUFHLFFBQVMsV0FDekNILEVBQVVJLGNBR2RKLEVBQVVFLEtBQUssaUJBQWlCQyxHQUFHLFFBQVMsV0FDeENILEVBQVVLLGNBekJsQixHQUFJTCxHQUFZVCxFQUFFSyxFQW9HbEIsT0FuR0FJLEdBQVVNLG9CQUFzQixFQUNoQ04sRUFBVU8sT0FBU1YsRUEyQm5CRyxFQUFVUSxVQUFZLFNBQVNDLEdBQzNCbEIsRUFBRSxrQkFBa0JtQixRQUFRLEtBQzVCbkIsRUFBQUEsMkJBQTZCa0IsRUFBN0IsTUFBd0NFLE9BQU8sS0FFZixJQUE1QlgsRUFBVU8sT0FBT0ssT0FDakJaLEVBQVVFLEtBQUssWUFBWVcsT0FhM0JiLEVBQVVFLEtBQUssWUFBWVksUUFJbkNkLEVBQVVlLGFBQWUsU0FBU0MsRUFBUUMsR0FDdENqQixFQUFVTyxPQUFTUyxFQUNuQmhCLEVBQVVFLEtBQUssTUFBTWdCLEtBQUssSUFDMUJGLEVBQU9HLFFBQVEsU0FBU3pCLEVBQUtlLEdBQ04sZ0JBQVJmLElBQ1BNLEVBQVVFLEtBQUssTUFBTUQsT0FBckIscUNBQ2FRLEVBRGIsMEJBRUFBLEVBRkEsaUZBSW9CZixFQUpwQiw0Q0FLYXVCLEVBQVVSLElBQVUsc0JBTGpDLHNDQVdSVCxFQUFVUSxVQUFVLElBR3hCUixFQUFVSSxVQUFZLFdBQ2RKLEVBQVVPLE9BQU9QLEVBQVVNLG9CQUFzQixHQUNqRE4sRUFBVVEsWUFBWVIsRUFBVU0sc0JBSW5DTixFQUFVUSxVQUFVLEdBQ3BCUixFQUFVTSxvQkFBc0IsSUFJckNOLEVBQVVLLFVBQVksV0FDZEwsRUFBVU8sT0FBT1AsRUFBVU0sb0JBQXNCLEdBQ2pETixFQUFVUSxZQUFZUixFQUFVTSxzQkFJbkNOLEVBQVVRLFVBQVVSLEVBQVVPLE9BQU9LLE9BQVMsR0FDOUNaLEVBQVVNLG9CQUFzQk4sRUFBVU8sT0FBT0ssT0FBUyxJQUkvRGQsSUFDQUUsRUFBVUMsT0FBTyxhQUNqQkQsRUFBVWUsYUFBYWxCLEdBQVksdUJBQXdCLDJCQUMzRHVCLFlBQVksV0FDUHBCLEVBQVVxQixHQUFHLFdBQ2hCckIsRUFBVUksYUFFVCxLQUNJSixFQUdYLFFBQVNzQixlQUFjQyxHQUNuQixHQUFJQyxHQUFZQyxJQUFJQyxNQUFNQyxJQUMxQkgsR0FBVUksS0FBSyxTQUFDQyxFQUFHQyxHQUFKLE1BQVVELEdBQUVFLEtBQUtDLGNBQWNGLEVBQUVDLE9BQ2hELElBQUlFLEdBQVVULEVBQVVVLE9BQU8sU0FBU0MsR0FDcEMsTUFBT0EsR0FBTUosS0FBS0ssY0FBY0MsU0FBU2QsRUFBSWEsZ0JBRWpERSxlQUFjLHNCQUF1QkwsRUFBUU0sTUFBTSxFQUFHLElBRzFELFFBQVNELGVBQWMxQyxFQUFTNEMsR0FDNUIsR0FBSUMsR0FBYWxELEVBQUVLLEVBQ25CNkMsR0FBV3ZCLEtBQUssSUFDaEJ3QixRQUFRQyxJQUFJSCxFQUhxQixJQUFBSSxJQUFBLEVBQUFDLEdBQUEsRUFBQUMsRUFBQUMsTUFBQSxLQUlqQyxJQUFBLEdBQUFDLEdBQUFDLEVBQXFCVCxFQUFyQlUsT0FBQUMsY0FBQVAsR0FBQUksRUFBQUMsRUFBQUcsUUFBQUMsTUFBQVQsR0FBQSxFQUEwQixDQUFBLEdBQWpCVSxHQUFpQk4sRUFBQU8sS0FDdEJkLEdBQVd4QyxPQUFYLHdCQUNVcUQsRUFBU0UsWUFEbkIsMkRBR1NGLEVBQVN2QixLQUhsQixLQUcyQnVCLEVBQVN2QixLQUhwQyxVQUw2QixNQUFBMEIsR0FBQVosR0FBQSxFQUFBQyxFQUFBVyxFQUFBLFFBQUEsS0FBQWIsR0FBQUssRUFBQUEsV0FBQUEsRUFBQUEsWUFBQSxRQUFBLEdBQUFKLEVBQUEsS0FBQUMsSUFZakNKLFFBQVFDLElBQUksUUFDWnBELEVBQUUsb0JBQW9CWSxHQUFHLFFBQVMsV0FDakMsR0FBSTRCLEdBQU94QyxFQUFFbUUsTUFBTUMsS0FBSyxPQUN4QmpCLFNBQVFDLElBQUlaLEdBQ1p4QyxFQUFFLDRDQUE0Q3FFLElBQUk3QixLQUl2RCxRQUFTOEIsZUFBY3RDLEdBQ25CbUIsUUFBUUMsSUFBSXBCLEdBQ1poQyxFQUFFLDRDQUE0Q3FFLElBQUksSUFJdEQsUUFBU0UsZUFBY3RDLEdBQ25CQSxFQUFVdUMsSUFBSSxTQUFTVCxFQUFVN0MsR0FDN0IsR0FBSXVELEdBQVlWLEVBQVN2QixLQUNyQmtDLEVBQWdCWCxFQUFTVyxjQUN6QkMsRUFBZVosRUFBU2EsUUFBVSxJQUNsQ0MsRUFBU2QsRUFBU2UsVUFBYSxJQUFNZixFQUFTZSxVQUFZLE9BQVMsR0FDbkVDLEVBQVloQixFQUFTaUIsWUFBWSxFQUVyQ2hGLEdBQUUsaUJBQWlCVSxPQUFuQixnQ0FDZ0JRLEVBRGhCLCtFQUdnQzZELEVBSGhDLDREQUtHTixFQUxILHdCQU1HQyxFQU5ILCtCQU9VQyxFQVBWLHdCQVFHRSxFQVJILHVDQWdCUixRQUFTSSxvQkFFTGpGLEVBQUUseUJBQXlCa0YsT0FBTyxTQUFTQyxHQUN2QyxHQUFJQyxHQUFpQnBGLEVBQUUsc0JBQXNCcUUsS0FDN0NjLEdBQUVFLGlCQUNGbEMsUUFBUUMsSUFBSWdDLEdBQ1pkLGNBQWNjLEdBQ2RwRixFQUFFLHNCQUFzQnFFLElBQUksTUFJaENyRSxFQUFFLDRDQUE0Q3NGLE1BQU0sV0FDaER0RixFQUFFLDRDQUE0Q3VGLFFBQVEsU0FBU0osR0FDM0QsR0FBSUMsR0FBaUJwRixFQUFFLDRDQUE0Q3FFLEtBQ25FbEIsU0FBUUMsSUFBSWdDLEdBQ1pyRCxjQUFjcUQsR0FDZHBGLEVBQUUsbUJBQW1CdUIsV0FJN0J2QixFQUFFLDRDQUE0Q3NGLE1BQU0sV0FDaER0RixFQUFFLDRDQUE0Q3VGLFFBQVEsU0FBU0osR0FDM0QsR0FBSUMsR0FBaUJwRixFQUFFLDRDQUE0Q3FFLEtBQ25FbEIsU0FBUUMsSUFBSWdDLEdBQ1pyRCxjQUFjcUQsR0FDZHBGLEVBQUUsbUJBQW1CdUIsV0FJN0J2QixFQUFFLDRDQUE0Q3dGLFNBQVMsV0FDbkR4RixFQUFFLG1CQUFtQnNCLFNBR3pCdEIsRUFBRSxvQkFBb0JZLEdBQUcsUUFBUyxXQUM5QlosRUFBRSx1QkFBdUIyQixLQUFLLElBQzlCMkMsY0FBY3RFLEVBQUVtRSxNQUFNQyxLQUFLLFNBQzNCcEUsRUFBRSxtQkFBbUJzQixTQUk3QixRQUFTbUUsc0NBQ1J6RixFQUFFLG1CQUFtQjBGLElBQUksUUFBU0MsT0FBT0MsV0FBYSxFQUFJNUYsRUFBRSxnQkFBZ0JxQixPQUFTLE1BdE50RixHQUFNd0UsYUFBYyxHQXlOaEIzRCxLQUNINEQsS0FBTSxXQUNMLEdBQUlDLGVBQWVDLFFBQVEsaUJBQWtCLENBQzVDLEdBQUlDLEdBQWFGLGVBQWVDLFFBQVEsZ0JBQ3hDOUQsS0FBSUMsTUFBUStELEtBQUtDLE1BQU1GLEdBQ3ZCL0QsSUFBSWtFLFlBR0psRSxLQUFJbUUsV0FHSEEsUUFBUyxXQUNMckcsRUFBRXNHLEtBQUt2RyxXQUFXd0csS0FBSyxTQUFTbkMsR0FDNUJqQixRQUFRQyxJQUFJLGlCQUFrQmdCLEdBQzlCMkIsZUFBZVMsUUFBUSxnQkFBaUJOLEtBQUtPLFVBQVVyQyxJQUN2RGxDLElBQUlDLE1BQVFpQyxFQUNaMEIsVUFHUk0sTUFBTyxXQUNOLEdBQUloQyxHQUFPbEMsSUFBSUMsTUFDWEYsRUFBWW1DLEVBQUtoQyxLQUFLWSxNQUFNLEVBQUcwRCxLQUFLQyxJQUFJZCxZQUFhekIsRUFBS2hDLEtBQUtmLE9BQVEsSUFJdkV1RixFQUFjeEMsRUFBS2hDLEtBQUt5RSxPQUFPLFNBQVNDLEVBQVkvQyxHQUN2RCxNQUFPK0MsR0FBV0MsT0FBT2hELEVBQVNpRCxnQkFHbkM3RCxTQUFRQyxJQUFJd0QsRUFBWSxHQUFHdkYsUUFDM0JhLElBQUkrRSxjQUFnQjdHLGVBQWUsV0FBWXdHLEdBQy9DckMsY0FBY3RDLEdBRWRnRCxtQkFDQVEsc0NBSUx6RixHQUFFa0gsVUFBVUMsTUFBTSxXQUNkakYsSUFBSTRELFNBR1I5RixFQUFFMkYsUUFBUXlCLE9BQU8sV0FDaEIzQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgbWF4X3Jlc3VsdHMgPSAyMDtcblxuZnVuY3Rpb24gZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICB1cmw6ICdodHRwczovL3d3dy5kZXNrYm9va2Vycy5jb20vbmwtbmwvc2FqYXguanNvbj9xPUFtc3RlcmRhbSZ0eXBlPS0mcGVvcGxlPWFueSZmYXZvcml0ZT0wJnBpZD0mc3c9NTIuMjkzNzUzJTJDNC42MzQ5NDImbmU9NTIuNDU1NTYyJTJDNS4xNjIyODYmaWRzPTE3MjAxJTJDMTk2NDAlMkMxMzY5MiUyQzEzNjkxJTJDMTIxMzYlMkMxNzkzOCUyQzE1MjkyJTJDMTQ4ODYlMkMxNDg4NSUyQzE0ODg0JTJDMTQ4ODMlMkMxNTczMCUyQzE1MzUzJTJDMTUzNTElMkMxNTMzMCUyQzE1MDgwJTJDMTcyOTAlMkMxNTQ1NCUyQzE1NDUxJTJDMTUzNzknXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcm91c2VsKGVsZW1lbnQsIGltYWdlX2Fycikge1xuXG4gICAgdmFyICRjYXJvdXNlbCA9ICQoZWxlbWVudCk7XG4gICAgJGNhcm91c2VsLmN1cnJlbnRfaW1hZ2VfaW5kZXggPSAwOyAvLyBcbiAgICAkY2Fyb3VzZWwuaW1hZ2VzID0gaW1hZ2VfYXJyO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29udHJvbHMoKSB7XG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IGBcblx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sLXdyYXBwZXIgbGVmdFwiPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udHJvbCBsZWZ0LWNvbnRyb2xcIj5cblx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sLXdyYXBwZXIgcmlnaHRcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRyb2wgcmlnaHQtY29udHJvbFwiPlxuXHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtY2hldnJvbi1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRgO1xuXG4gICAgICAgICRjYXJvdXNlbC5hcHBlbmQodGVtcGxhdGUpO1xuXG4gICAgICAgICRjYXJvdXNlbC5maW5kKCcucmlnaHQtY29udHJvbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGNhcm91c2VsLm5leHRJbWFnZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkY2Fyb3VzZWwuZmluZCgnLmxlZnQtY29udHJvbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGNhcm91c2VsLnByZXZJbWFnZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkY2Fyb3VzZWwuZ29Ub0ltYWdlID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgJCgnLmNhcm91c2VsLWl0ZW0nKS5mYWRlT3V0KDIwMDApO1xuICAgICAgICAkKGAuY2Fyb3VzZWwtaXRlbVtkYXRhLWlkPVwiJHtpbmRleH1cIl1gKS5mYWRlSW4oMjAwMCk7XG5cbiAgICAgICAgaWYgKCRjYXJvdXNlbC5pbWFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAkY2Fyb3VzZWwuZmluZCgnLmNvbnRyb2wnKS5oaWRlKCk7XG4gICAgICAgIH0gXG4gICAgICAgIC8qXG4gICAgICAgIC8vIFVubmVjZXNzYXJ5IHdpdGggbmV3IGxvb3BpbmcgZmVhdHVyZVxuICAgICAgICBlbHNlIGlmICgkY2Fyb3VzZWwuY3VycmVudF9pbWFnZV9pbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgJGNhcm91c2VsLmZpbmQoJy5sZWZ0LWNvbnRyb2wnKS5oaWRlKCk7XG4gICAgICAgICAgICAkY2Fyb3VzZWwuZmluZCgnLnJpZ2h0LWNvbnRyb2wnKS5zaG93KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoJGNhcm91c2VsLmN1cnJlbnRfaW1hZ2VfaW5kZXggPT09ICRjYXJvdXNlbC5pbWFnZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgJGNhcm91c2VsLmZpbmQoJy5sZWZ0LWNvbnRyb2wnKS5zaG93KCk7XG4gICAgICAgICAgICAkY2Fyb3VzZWwuZmluZCgnLnJpZ2h0LWNvbnRyb2wnKS5oaWRlKCk7XG4gICAgICAgIH0gXG4gICAgICAgICovXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJGNhcm91c2VsLmZpbmQoJy5jb250cm9sJykuc2hvdygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJGNhcm91c2VsLnVwZGF0ZVNsaWRlcyA9IGZ1bmN0aW9uKHNsaWRlcywgaGVhZGxpbmVzKSB7XG4gICAgICAgICRjYXJvdXNlbC5pbWFnZXMgPSBzbGlkZXM7XG4gICAgICAgICRjYXJvdXNlbC5maW5kKCd1bCcpLmh0bWwoXCJcIik7XG4gICAgICAgIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uKHVybCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJykgeyAvLyBUeXBlIGNoZWNrXG4gICAgICAgICAgICAgICAgJGNhcm91c2VsLmZpbmQoJ3VsJykuYXBwZW5kKGA8bGkgXG4gICAgICAgICAgICAgICAgXHRpZD1cImltYWdlLSR7aW5kZXh9XCIgXG5cdFx0XHRcdFx0ZGF0YS1pZD1cIiR7aW5kZXh9XCIgXG5cdFx0XHRcdFx0Y2xhc3M9XCJjYXJvdXNlbC1pdGVtXCIgXG5cdFx0XHRcdFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHt1cmx9JylcIj5cblx0XHRcdFx0XHRcdDxoMSBjbGFzcz1cImhlYWRsaW5lXCI+JHtoZWFkbGluZXNbaW5kZXhdIHx8IFwiSGVhZGxpbmUgR29lcyBIZXJlXCJ9PC9oMT5cblx0XHRcdFx0XHQ8L2xpPlxuXHRcdFx0XHRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGNhcm91c2VsLmdvVG9JbWFnZSgwKTtcbiAgICB9XG5cbiAgICAkY2Fyb3VzZWwubmV4dEltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkY2Fyb3VzZWwuaW1hZ2VzWyRjYXJvdXNlbC5jdXJyZW50X2ltYWdlX2luZGV4ICsgMV0pIHtcbiAgICAgICAgICAgICRjYXJvdXNlbC5nb1RvSW1hZ2UoKyskY2Fyb3VzZWwuY3VycmVudF9pbWFnZV9pbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgIFx0Ly8gTG9vcFxuICAgICAgICBcdCRjYXJvdXNlbC5nb1RvSW1hZ2UoMCk7XG4gICAgICAgIFx0JGNhcm91c2VsLmN1cnJlbnRfaW1hZ2VfaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJGNhcm91c2VsLnByZXZJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJGNhcm91c2VsLmltYWdlc1skY2Fyb3VzZWwuY3VycmVudF9pbWFnZV9pbmRleCAtIDFdKSB7XG4gICAgICAgICAgICAkY2Fyb3VzZWwuZ29Ub0ltYWdlKC0tJGNhcm91c2VsLmN1cnJlbnRfaW1hZ2VfaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICBcdC8vIExvb3BcbiAgICAgICAgXHQkY2Fyb3VzZWwuZ29Ub0ltYWdlKCRjYXJvdXNlbC5pbWFnZXMubGVuZ3RoIC0gMSk7XG4gICAgICAgIFx0JGNhcm91c2VsLmN1cnJlbnRfaW1hZ2VfaW5kZXggPSAkY2Fyb3VzZWwuaW1hZ2VzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVDb250cm9scygpO1xuICAgICRjYXJvdXNlbC5hcHBlbmQoJzx1bD48L3VsPicpO1xuICAgICRjYXJvdXNlbC51cGRhdGVTbGlkZXMoaW1hZ2VfYXJyLCBbXCJGYXN0LCBFYXN5LCBGbGV4aWJsZVwiLCBcIkJvb2sgb25lIG9mIG91ciBzcGFjZXNcIl0pO1xuICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgIFx0aWYoISRjYXJvdXNlbC5pcyhcIjpob3ZlclwiKSkge1xuICAgIFx0XHQkY2Fyb3VzZWwubmV4dEltYWdlKCk7XG4gICAgXHR9XG4gICAgfSwgNjAwMCk7XG4gICAgcmV0dXJuICRjYXJvdXNlbDtcbn1cblxuZnVuY3Rpb24gcHJlZGljdFNlYXJjaChzdHIpIHtcbiAgICBsZXQgbG9jYXRpb25zID0gYXBwLm1vZGVsLnJvd3M7XG4gICAgbG9jYXRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuICAgIGxldCByZXN1bHRzID0gbG9jYXRpb25zLmZpbHRlcihmdW5jdGlvbihwbGFjZSkge1xuICAgICAgICByZXR1cm4gcGxhY2UubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN0ci50b0xvd2VyQ2FzZSgpKTtcbiAgICB9KTtcbiAgICBmaWxsUHJlZGljdG9yKCcucHJlZGljdGl2ZS1yZXN1bHRzJywgcmVzdWx0cy5zbGljZSgwLCA1KSk7XG59XG5cbmZ1bmN0aW9uIGZpbGxQcmVkaWN0b3IoZWxlbWVudCwgYXJyKSB7XG4gICAgdmFyICRwcmVkaWN0b3IgPSAkKGVsZW1lbnQpO1xuICAgICRwcmVkaWN0b3IuaHRtbChcIlwiKTtcbiAgICBjb25zb2xlLmxvZyhhcnIpO1xuICAgIGZvciAobGV0IGxvY2F0aW9uIG9mIGFycikge1xuICAgICAgICAkcHJlZGljdG9yLmFwcGVuZChgXG5cdFx0XHQ8bGkgZGF0YS1pZD1cIiR7bG9jYXRpb24ubG9jYXRpb25faWR9XCIgXG5cdFx0XHRcdGNsYXNzPVwicHJlZGljdGl2ZS1pdGVtXCJcblx0XHRcdFx0ZGF0YS1uYW1lPVwiJHtsb2NhdGlvbi5uYW1lfVwiPiR7bG9jYXRpb24ubmFtZX08L2xpPmApO1xuICAgIH1cblxuICAgIC8vIFNldCBoYW5kbGVyXG4gICAgY29uc29sZS5sb2coJ25hbWUnKTtcbiAgICAkKCcucHJlZGljdGl2ZS1pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICBcdGxldCBuYW1lID0gJCh0aGlzKS5kYXRhKCduYW1lJyk7XG4gICAgXHRjb25zb2xlLmxvZyhuYW1lKTtcbiAgICBcdCQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbChuYW1lKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzU2VhcmNoKHN0cikge1xuICAgIGNvbnNvbGUubG9nKHN0cik7XG4gICAgJCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKFwiXCIpO1xuXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVJlc3VsdHMobG9jYXRpb25zKSB7XG4gICAgbG9jYXRpb25zLm1hcChmdW5jdGlvbihsb2NhdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgbGV0IHdvcmtwbGFjZSA9IGxvY2F0aW9uLm5hbWU7XG4gICAgICAgIGxldCBsb2NhdGlvbl9uYW1lID0gbG9jYXRpb24ubG9jYXRpb25fbmFtZTtcbiAgICAgICAgbGV0IHJldmlld19zY29yZSA9IGxvY2F0aW9uLnJhdGluZyB8fCBcIi1cIjtcbiAgICAgICAgbGV0IHByaWNlID0gKGxvY2F0aW9uLmRheV9wcmljZSkgPyAnJCcgKyBsb2NhdGlvbi5kYXlfcHJpY2UgKyBcIi9kYXlcIiA6IFwiXCI7XG4gICAgICAgIGxldCBpbWFnZV91cmwgPSBsb2NhdGlvbi5pbWFnZV91cmxzMlswXTsgLy8gVXNlIHNtYWxsZXIgdGh1bWJzXG5cbiAgICAgICAgJCgnLnJlc3VsdHMtbGlzdCcpLmFwcGVuZChgPGxpIFxuICAgICAgICBcdGlkPVwibG9jYXRpb24tJHtpbmRleH1cIiBcbiAgICAgICAgXHRjbGFzcz1cInJlc3VsdC1pdGVtXCIgXG4gICAgICAgIFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtpbWFnZV91cmx9JylcIj5cblx0XHRcdFx0PHVsIGNsYXNzPVwibG9jYXRpb24taW5mb1wiPlxuXHRcdFx0XHRcdDxsaT4ke3dvcmtwbGFjZX08L2xpPlxuXHRcdFx0XHRcdDxsaT4ke2xvY2F0aW9uX25hbWV9PC9saT5cblx0XHRcdFx0XHQ8bGk+U2NvcmU6ICR7cmV2aWV3X3Njb3JlfTwvbGk+XG5cdFx0XHRcdFx0PGxpPiR7cHJpY2V9PC9saT5cblx0XHRcdFx0PC91bD5cblx0XHRcdDwvbGk+YCk7XG5cblxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRFdmVudEhhbmRsZXJzKCkge1xuICAgIC8vIFNlYXJjaCBmb3JtXG4gICAgJCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtJykuc3VibWl0KGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGV0IHNlYXJjaF9pbnF1aXJ5ID0gJCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hfaW5xdWlyeSk7XG4gICAgICAgIHByb2Nlc3NTZWFyY2goc2VhcmNoX2lucXVpcnkpO1xuICAgICAgICAkKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbChcIlwiKTtcbiAgICB9KTtcblxuICAgIC8vIFNlYXJjaCBmb3JtIHByZWRpY3RpdmUgc2VhcmNoXG4gICAgJCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykuZm9jdXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmtleWRvd24oZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgbGV0IHNlYXJjaF9pbnF1aXJ5ID0gJCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hfaW5xdWlyeSk7XG4gICAgICAgICAgICBwcmVkaWN0U2VhcmNoKHNlYXJjaF9pbnF1aXJ5KTtcbiAgICAgICAgICAgICQoJy5wcmVkaWN0aXZlLWJveCcpLnNob3coKTtcbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgICQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmZvY3VzKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjbG9jYXRpb24tc2VhcmNoLWZvcm0gaW5wdXRbdHlwZT1cInRleHRcIl0nKS5rZXlkb3duKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGxldCBzZWFyY2hfaW5xdWlyeSA9ICQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VhcmNoX2lucXVpcnkpO1xuICAgICAgICAgICAgcHJlZGljdFNlYXJjaChzZWFyY2hfaW5xdWlyeSk7XG4gICAgICAgICAgICAkKCcucHJlZGljdGl2ZS1ib3gnKS5zaG93KCk7XG4gICAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAkKCcjbG9jYXRpb24tc2VhcmNoLWZvcm0gaW5wdXRbdHlwZT1cInRleHRcIl0nKS5mb2N1c291dChmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLnByZWRpY3RpdmUtYm94JykuaGlkZSgpO1xuICAgIH0pO1xuXG4gICAgJCgnLnByZWRpY3RpdmUtaXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcucHJlZGljdGl2ZS1yZXN1bHRzJykuaHRtbChcIlwiKTtcbiAgICAgICAgcHJvY2Vzc1NlYXJjaCgkKHRoaXMpLmRhdGEoJ25hbWUnKSk7XG4gICAgICAgICQoJy5wcmVkaWN0aXZlLWJveCcpLmhpZGUoKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBzZXREaW1lbnNpb25zRm9yUmVzcG9uc2l2ZUVsZW1lbnRzKCkge1xuXHQkKCd1bC5yZXN1bHRzLWxpc3QnKS5jc3MoJ3dpZHRoJywgd2luZG93LmlubmVyV2lkdGggLyA1ICogJCgnLnJlc3VsdC1pdGVtJykubGVuZ3RoICsgJ3B4Jyk7XG59XG5cbnZhciBhcHAgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbl9kYXRhJykpIHtcblx0XHRcdGxldCBkYXRhU3RyaW5nID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25fZGF0YScpXG5cdFx0XHRhcHAubW9kZWwgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xuXHRcdFx0YXBwLnNldFVwKCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0YXBwLnNldERhdGEoKTtcblx0XHR9XG5cdH0sXG4gICAgc2V0RGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICAgICQud2hlbihnZXREYXRhKCkpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JldHJpZXZlZCBkYXRhJywgZGF0YSk7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsb2NhdGlvbl9kYXRhJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICAgICAgYXBwLm1vZGVsID0gZGF0YTtcbiAgICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzZXRVcDogZnVuY3Rpb24oKSB7XG4gICAgXHRsZXQgZGF0YSA9IGFwcC5tb2RlbDtcbiAgICBcdGxldCBsb2NhdGlvbnMgPSBkYXRhLnJvd3Muc2xpY2UoMCwgTWF0aC5taW4obWF4X3Jlc3VsdHMsIGRhdGEucm93cy5sZW5ndGggLTEpICk7XG4gICAgXHQvLyBUaGlzIHdhcyBpbml0aWFsbHkgc2V0IHVwIHRvIGp1c3QgaGF2ZSBhIGNhcm91c2VsIGZvciBvbmUgbG9jYXRpb25cbiAgICBcdC8vIGxldCBtYWluX2ltYWdlcyA9IGxvY2F0aW9uc1swXS5pbWFnZV91cmxzLmNvbmNhdChsb2NhdGlvbnNbMF0uaW1hZ2VfdXJsczIpO1xuXG4gICAgXHRsZXQgbWFpbl9pbWFnZXMgPSBkYXRhLnJvd3MucmVkdWNlKGZ1bmN0aW9uKGFsbF9pbWFnZXMsIGxvY2F0aW9uKSB7XG4gICAgXHRcdHJldHVybiBhbGxfaW1hZ2VzLmNvbmNhdChsb2NhdGlvbi5pbWFnZV91cmxzKTtcbiAgICBcdH0sIFtdKTtcblxuICAgIFx0Y29uc29sZS5sb2cobWFpbl9pbWFnZXNbMF0ubGVuZ3RoKTtcbiAgICBcdGFwcC5tYWluX2Nhcm91c2VsID0gY3JlYXRlQ2Fyb3VzZWwoJ2Nhcm91c2VsJywgbWFpbl9pbWFnZXMpO1xuICAgIFx0dXBkYXRlUmVzdWx0cyhsb2NhdGlvbnMpO1xuXG4gICAgXHRzZXRFdmVudEhhbmRsZXJzKCk7XG4gICAgXHRzZXREaW1lbnNpb25zRm9yUmVzcG9uc2l2ZUVsZW1lbnRzKCk7XG4gICAgfVxufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBhcHAuaW5pdCgpO1xufSk7XG5cbiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG5cdHNldERpbWVuc2lvbnNGb3JSZXNwb25zaXZlRWxlbWVudHMoKTtcbn0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
