"use strict";function getData(){return $.ajax({dataType:"json",url:"https://www.deskbookers.com/nl-nl/sajax.json?q=Amsterdam&type=-&people=any&favorite=0&pid=&sw=52.293753%2C4.634942&ne=52.455562%2C5.162286&ids=17201%2C19640%2C13692%2C13691%2C12136%2C17938%2C15292%2C14886%2C14885%2C14884%2C14883%2C15730%2C15353%2C15351%2C15330%2C15080%2C17290%2C15454%2C15451%2C15379"})}function createCarousel(t,e){function n(){var t='\n\t\t\t<div class="control-wrapper left">\n\t\t\t\t<div class="control left-control">\n\t\t\t\t\t<i class="fa fa-chevron-left" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="control-wrapper right">\n\t\t\t\t<div class="control right-control">\n\t\t\t\t\t<i class="fa fa-chevron-right" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t';o.append(t),o.find(".right-control").on("click",function(){o.nextImage()}),o.find(".left-control").on("click",function(){o.prevImage()})}var o=$(t);return o.current=0,o.images=e,o.goToImage=function(t){console.log("Go to image",t),$(".carousel-item").fadeOut(),$('.carousel-item[data-id="'+t+'"]').fadeIn(),0===o.images.length?o.find(".control").hide():0===o.current?(o.find(".left-control").hide(),o.find(".right-control").show()):o.current===o.images.length-1?(o.find(".left-control").show(),o.find(".right-control").hide()):(console.log("show both"),o.find(".control").show())},o.updateImages=function(t){o.images=t,o.find("ul").html(""),t.map(function(t,e){o.find("ul").append('\n\t\t\t\t\t<li id="image-'+e+'" \n\t\t\t\t\t\tdata-id="'+e+'" \n\t\t\t\t\t\tclass="carousel-item" \n\t\t\t\t\t\tstyle="background-image:url(\''+t+"')\"></li>\n\t\t\t\t")}),o.goToImage(0)},o.nextImage=function(){console.log("Go to image"),o.images[o.current+1]&&o.goToImage(o.current++)},o.prevImage=function(){o.images[o.current-1]&&o.goToImage(o.current--)},n(),o.append("<ul></ul>"),o.updateImages(e),o}function predictSearch(t){var e=app.model.rows;e.sort(function(t,e){return t.name.localeCompare(e.name)});var n=e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});fillPredictor(".predictive-results",n.slice(0,5))}function fillPredictor(t,e){var n=$(t);n.html(""),console.log(e);var o=!0,i=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value;n.append('\n\t\t\t<li data-id="'+l.location_id+'" \n\t\t\t\tclass="predictive-item"\n\t\t\t\tdata-name="'+l.name+'">'+l.name+"</li>")}}catch(s){i=!0,a=s}finally{try{!o&&c["return"]&&c["return"]()}finally{if(i)throw a}}}function processSearch(t){console.log(t),$('#location-search-form input[type="text"]').val("")}function updateResults(t){t.map(function(t,e){var n=t.name,o=t.location_name,i=t.rating||"-",a=t.day_price?"$"+t.day_price+"/day":"",r=t.image_urls[0];$(".results-list").append('<li \n        \tid="location-'+e+'" \n        \tclass="result-item" \n        \tstyle="background-image:url(\''+r+'\')">\n\t\t\t\t<ul class="location-info">\n\t\t\t\t\t<li>'+n+"</li>\n\t\t\t\t\t<li>"+o+"</li>\n\t\t\t\t\t<li>Score: "+i+"</li>\n\t\t\t\t\t<li>"+a+"</li>\n\t\t\t\t</ul>\n\t\t\t</li>")})}function setEventHandlers(){$("#location-search-form").submit(function(t){var e=$('input[type="text"]').val();t.preventDefault(),console.log(e),processSearch(e),$('input[type="text"]').val("")}),$('#location-search-form input[type="text"]').focus(function(){$('#location-search-form input[type="text"]').keydown(function(t){var e=$('#location-search-form input[type="text"]').val();console.log(e),predictSearch(e),$(".predictive-box").show()})}),$('#location-search-form input[type="text"]').focus(function(){$('#location-search-form input[type="text"]').keydown(function(t){var e=$('#location-search-form input[type="text"]').val();console.log(e),predictSearch(e),$(".predictive-box").show()})}),$('#location-search-form input[type="text"]').focusout(function(){$(".predictive-box").hide()}),$(".predictive-item").on("click",function(){$(".predictive-results").html(""),processSearch($(this).data("name")),$(".predictive-box").hide()})}var max_results=5,app={init:function(){$.when(getData()).then(function(t){console.log("Retrieved data".data),app.model=t;var e=t.rows.slice(0,max_results),n=e[0].image_urls.concat(e[0].image_urls2);app.main_carousel=createCarousel("carousel",n),updateResults(e)}),setEventHandlers()}};$(document).ready(function(){app.init()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJnZXREYXRhIiwiJCIsImFqYXgiLCJkYXRhVHlwZSIsInVybCIsImNyZWF0ZUNhcm91c2VsIiwiZWxlbWVudCIsImltYWdlX2FyciIsImNyZWF0ZUNvbnRyb2xzIiwidGVtcGxhdGUiLCIkY2Fyb3VzZWwiLCJhcHBlbmQiLCJmaW5kIiwib24iLCJuZXh0SW1hZ2UiLCJwcmV2SW1hZ2UiLCJjdXJyZW50IiwiaW1hZ2VzIiwiZ29Ub0ltYWdlIiwiaW5kZXgiLCJjb25zb2xlIiwibG9nIiwiZmFkZU91dCIsImZhZGVJbiIsImxlbmd0aCIsImhpZGUiLCJzaG93IiwidXBkYXRlSW1hZ2VzIiwiaHRtbCIsIm1hcCIsInByZWRpY3RTZWFyY2giLCJzdHIiLCJsb2NhdGlvbnMiLCJhcHAiLCJtb2RlbCIsInJvd3MiLCJzb3J0IiwiYSIsImIiLCJuYW1lIiwibG9jYWxlQ29tcGFyZSIsInJlc3VsdHMiLCJmaWx0ZXIiLCJwbGFjZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmaWxsUHJlZGljdG9yIiwic2xpY2UiLCJhcnIiLCIkcHJlZGljdG9yIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJsb2NhdGlvbiIsInZhbHVlIiwibG9jYXRpb25faWQiLCJlcnIiLCJwcm9jZXNzU2VhcmNoIiwidmFsIiwidXBkYXRlUmVzdWx0cyIsIndvcmtwbGFjZSIsImxvY2F0aW9uX25hbWUiLCJyZXZpZXdfc2NvcmUiLCJyYXRpbmciLCJwcmljZSIsImRheV9wcmljZSIsImltYWdlX3VybCIsImltYWdlX3VybHMiLCJzZXRFdmVudEhhbmRsZXJzIiwic3VibWl0IiwiZSIsInNlYXJjaF9pbnF1aXJ5IiwicHJldmVudERlZmF1bHQiLCJmb2N1cyIsImtleWRvd24iLCJmb2N1c291dCIsInRoaXMiLCJkYXRhIiwibWF4X3Jlc3VsdHMiLCJpbml0Iiwid2hlbiIsInRoZW4iLCJtYWluX2ltYWdlcyIsImNvbmNhdCIsImltYWdlX3VybHMyIiwibWFpbl9jYXJvdXNlbCIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiJBQUFBLFlBSUEsU0FBU0EsV0FDTCxNQUFPQyxHQUFFQyxNQUNMQyxTQUFVLE9BQ1ZDLElBQUssaVRBSWIsUUFBU0MsZ0JBQWVDLEVBQVNDLEdBTWhDLFFBQVNDLEtBQ1IsR0FBSUMsR0FBQUEscVhBYUpDLEdBQVVDLE9BQU9GLEdBRWpCQyxFQUFVRSxLQUFLLGtCQUFrQkMsR0FBRyxRQUFTLFdBQzVDSCxFQUFVSSxjQUdYSixFQUFVRSxLQUFLLGlCQUFpQkMsR0FBRyxRQUFTLFdBQzNDSCxFQUFVSyxjQXpCWixHQUFJTCxHQUFZVCxFQUFFSyxFQWtGbEIsT0FqRkFJLEdBQVVNLFFBQVUsRUFDcEJOLEVBQVVPLE9BQVNWLEVBMkJuQkcsRUFBVVEsVUFBWSxTQUFTQyxHQUM5QkMsUUFBUUMsSUFBSSxjQUFlRixHQUMzQmxCLEVBQUUsa0JBQWtCcUIsVUFDcEJyQixFQUFBQSwyQkFBNkJrQixFQUE3QixNQUF3Q0ksU0FFVCxJQUE1QmIsRUFBVU8sT0FBT08sT0FDbkJkLEVBQVVFLEtBQUssWUFBWWEsT0FFRSxJQUF0QmYsRUFBVU0sU0FDakJOLEVBQVVFLEtBQUssaUJBQWlCYSxPQUNoQ2YsRUFBVUUsS0FBSyxrQkFBa0JjLFFBRXpCaEIsRUFBVU0sVUFBWU4sRUFBVU8sT0FBT08sT0FBUyxHQUN4RGQsRUFBVUUsS0FBSyxpQkFBaUJjLE9BQ2hDaEIsRUFBVUUsS0FBSyxrQkFBa0JhLFNBR2pDTCxRQUFRQyxJQUFJLGFBQ1pYLEVBQVVFLEtBQUssWUFBWWMsU0FJN0JoQixFQUFVaUIsYUFBZSxTQUFTVixHQUNqQ1AsRUFBVU8sT0FBU0EsRUFDbkJQLEVBQVVFLEtBQUssTUFBTWdCLEtBQUssSUFDcEJYLEVBQU9ZLElBQUksU0FB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QTRDaUYsU0FBUyxXQUN0RGpGLEVBQUUsbUJBQW1Cd0IsU0FHdEJ4QixFQUFFLG9CQUFvQlksR0FBRyxRQUFTLFdBQ2pDWixFQUFFLHVCQUF1QjJCLEtBQUssSUFDOUJvQyxjQUFjL0QsRUFBRWtGLE1BQU1DLEtBQUssU0FDM0JuRixFQUFFLG1CQUFtQndCLFNBckx2QixHQUFNNEQsYUFBYyxFQXlMaEJwRCxLQUNBcUQsS0FBTSxXQUNGckYsRUFBRXNGLEtBQUt2RixXQUFXd0YsS0FBSyxTQUFTSixHQUMvQmhFLFFBQVFDLElBQUksaUJBQWtCK0QsTUFDOUJuRCxJQUFJQyxNQUFRa0QsQ0FDWixJQUFJcEQsR0FBWW9ELEVBQUtqRCxLQUFLWSxNQUFNLEVBQUdzQyxhQUMvQkksRUFBY3pELEVBQVUsR0FBRzBDLFdBQVdnQixPQUFPMUQsRUFBVSxHQUFHMkQsWUFHM0QxRCxLQUFJMkQsY0FBZ0J2RixlQUFlLFdBQVdvRixHQUNqRHZCLGNBQWNsQyxLQUdmMkMsb0JBS1IxRSxHQUFFNEYsVUFBVUMsTUFBTSxXQUNkN0QsSUFBSXFEIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBtYXhfcmVzdWx0cyA9IDU7XG5cbmZ1bmN0aW9uIGdldERhdGEoKSB7XG4gICAgcmV0dXJuICQuYWpheCh7XG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly93d3cuZGVza2Jvb2tlcnMuY29tL25sLW5sL3NhamF4Lmpzb24/cT1BbXN0ZXJkYW0mdHlwZT0tJnBlb3BsZT1hbnkmZmF2b3JpdGU9MCZwaWQ9JnN3PTUyLjI5Mzc1MyUyQzQuNjM0OTQyJm5lPTUyLjQ1NTU2MiUyQzUuMTYyMjg2Jmlkcz0xNzIwMSUyQzE5NjQwJTJDMTM2OTIlMkMxMzY5MSUyQzEyMTM2JTJDMTc5MzglMkMxNTI5MiUyQzE0ODg2JTJDMTQ4ODUlMkMxNDg4NCUyQzE0ODgzJTJDMTU3MzAlMkMxNTM1MyUyQzE1MzUxJTJDMTUzMzAlMkMxNTA4MCUyQzE3MjkwJTJDMTU0NTQlMkMxNTQ1MSUyQzE1Mzc5J1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJvdXNlbChlbGVtZW50LCBpbWFnZV9hcnIpIHtcblxuXHR2YXIgJGNhcm91c2VsID0gJChlbGVtZW50KTtcblx0JGNhcm91c2VsLmN1cnJlbnQgPSAwOyAvLyBcblx0JGNhcm91c2VsLmltYWdlcyA9IGltYWdlX2Fycjtcblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xzKCkge1xuXHRcdHZhciB0ZW1wbGF0ZSA9IGBcblx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sLXdyYXBwZXIgbGVmdFwiPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udHJvbCBsZWZ0LWNvbnRyb2xcIj5cblx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sLXdyYXBwZXIgcmlnaHRcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRyb2wgcmlnaHQtY29udHJvbFwiPlxuXHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtY2hldnJvbi1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHRgO1xuXG5cdFx0JGNhcm91c2VsLmFwcGVuZCh0ZW1wbGF0ZSk7XG5cblx0XHQkY2Fyb3VzZWwuZmluZCgnLnJpZ2h0LWNvbnRyb2wnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdCRjYXJvdXNlbC5uZXh0SW1hZ2UoKTtcblx0XHR9KTtcblxuXHRcdCRjYXJvdXNlbC5maW5kKCcubGVmdC1jb250cm9sJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQkY2Fyb3VzZWwucHJldkltYWdlKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQkY2Fyb3VzZWwuZ29Ub0ltYWdlID0gZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRjb25zb2xlLmxvZygnR28gdG8gaW1hZ2UnLCBpbmRleCk7XG5cdFx0JCgnLmNhcm91c2VsLWl0ZW0nKS5mYWRlT3V0KCk7XG5cdFx0JChgLmNhcm91c2VsLWl0ZW1bZGF0YS1pZD1cIiR7aW5kZXh9XCJdYCkuZmFkZUluKCk7XG5cblx0XHRpZigkY2Fyb3VzZWwuaW1hZ2VzLmxlbmd0aCA9PT0gMCApIHtcblx0XHRcdCRjYXJvdXNlbC5maW5kKCcuY29udHJvbCcpLmhpZGUoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZigkY2Fyb3VzZWwuY3VycmVudCA9PT0gMCkge1xuXHRcdFx0JGNhcm91c2VsLmZpbmQoJy5sZWZ0LWNvbnRyb2wnKS5oaWRlKCk7XG5cdFx0XHQkY2Fyb3VzZWwuZmluZCgnLnJpZ2h0LWNvbnRyb2wnKS5zaG93KCk7XG5cdFx0fSBcblx0XHRlbHNlIGlmICgkY2Fyb3VzZWwuY3VycmVudCA9PT0gJGNhcm91c2VsLmltYWdlcy5sZW5ndGggLSAxKSB7XG5cdFx0XHQkY2Fyb3VzZWwuZmluZCgnLmxlZnQtY29udHJvbCcpLnNob3coKTtcblx0XHRcdCRjYXJvdXNlbC5maW5kKCcucmlnaHQtY29udHJvbCcpLmhpZGUoKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZygnc2hvdyBib3RoJyk7XG5cdFx0XHQkY2Fyb3VzZWwuZmluZCgnLmNvbnRyb2wnKS5zaG93KCk7XG5cdFx0fVxuXHR9XG5cblx0JGNhcm91c2VsLnVwZGF0ZUltYWdlcyA9IGZ1bmN0aW9uKGltYWdlcykge1xuXHRcdCRjYXJvdXNlbC5pbWFnZXMgPSBpbWFnZXM7XG5cdFx0JGNhcm91c2VsLmZpbmQoJ3VsJykuaHRtbChcIlwiKTtcbiAgICAgICAgaW1hZ2VzLm1hcChmdW5jdGlvbih1cmwsIGluZGV4KSB7XG4gICAgICAgICAgICAkY2Fyb3VzZWwuZmluZCgndWwnKS5hcHBlbmQoYFxuXHRcdFx0XHRcdDxsaSBpZD1cImltYWdlLSR7aW5kZXh9XCIgXG5cdFx0XHRcdFx0XHRkYXRhLWlkPVwiJHtpbmRleH1cIiBcblx0XHRcdFx0XHRcdGNsYXNzPVwiY2Fyb3VzZWwtaXRlbVwiIFxuXHRcdFx0XHRcdFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHt1cmx9JylcIj48L2xpPlxuXHRcdFx0XHRgKTtcbiAgICAgICAgfSk7XG4gICAgICAgICRjYXJvdXNlbC5nb1RvSW1hZ2UoMCk7XG5cdH1cblxuXHQkY2Fyb3VzZWwubmV4dEltYWdlID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29uc29sZS5sb2coJ0dvIHRvIGltYWdlJyk7XG5cdFx0aWYgKCRjYXJvdXNlbC5pbWFnZXNbJGNhcm91c2VsLmN1cnJlbnQgKyAxXSkge1xuXHRcdFx0JGNhcm91c2VsLmdvVG9JbWFnZSgkY2Fyb3VzZWwuY3VycmVudCsrKTtcblx0XHR9XHRcblx0fVxuXG5cdCRjYXJvdXNlbC5wcmV2SW1hZ2UgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoJGNhcm91c2VsLmltYWdlc1skY2Fyb3VzZWwuY3VycmVudCAtIDFdKSB7XG5cdFx0XHQkY2Fyb3VzZWwuZ29Ub0ltYWdlKCRjYXJvdXNlbC5jdXJyZW50LS0pO1xuXHRcdH1cblx0fVxuXG5cdGNyZWF0ZUNvbnRyb2xzKCk7XG5cdCRjYXJvdXNlbC5hcHBlbmQoJzx1bD48L3VsPicpO1xuXHQkY2Fyb3VzZWwudXBkYXRlSW1hZ2VzKGltYWdlX2FycilcblxuXHRyZXR1cm4gJGNhcm91c2VsO1xufVxuXG5mdW5jdGlvbiBwcmVkaWN0U2VhcmNoKHN0cikge1xuXHRsZXQgbG9jYXRpb25zID0gYXBwLm1vZGVsLnJvd3M7XG5cdGxvY2F0aW9ucy5zb3J0KChhLGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXHRsZXQgcmVzdWx0cyA9IGxvY2F0aW9ucy5maWx0ZXIoZnVuY3Rpb24ocGxhY2UpIHtcblx0XHRyZXR1cm4gcGxhY2UubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN0ci50b0xvd2VyQ2FzZSgpKTtcblx0fSk7XG5cdGZpbGxQcmVkaWN0b3IoJy5wcmVkaWN0aXZlLXJlc3VsdHMnLCByZXN1bHRzLnNsaWNlKDAsNSkpO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJlZGljdG9yKGVsZW1lbnQsIGFycikge1xuXHR2YXIgJHByZWRpY3RvciA9ICQoZWxlbWVudCk7XG5cdCRwcmVkaWN0b3IuaHRtbChcIlwiKTtcblx0Y29uc29sZS5sb2coYXJyKTtcblx0Zm9yKGxldCBsb2NhdGlvbiBvZiBhcnIpIHtcblx0XHQkcHJlZGljdG9yLmFwcGVuZChgXG5cdFx0XHQ8bGkgZGF0YS1pZD1cIiR7bG9jYXRpb24ubG9jYXRpb25faWR9XCIgXG5cdFx0XHRcdGNsYXNzPVwicHJlZGljdGl2ZS1pdGVtXCJcblx0XHRcdFx0ZGF0YS1uYW1lPVwiJHtsb2NhdGlvbi5uYW1lfVwiPiR7bG9jYXRpb24ubmFtZX08L2xpPmBcblx0XHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1NlYXJjaChzdHIpIHtcblx0Y29uc29sZS5sb2coc3RyKTtcblx0JCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKFwiXCIpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVSZXN1bHRzKGxvY2F0aW9ucykge1xuICAgIGxvY2F0aW9ucy5tYXAoZnVuY3Rpb24obG9jYXRpb24sIGluZGV4KSB7XG4gICAgICAgIGxldCB3b3JrcGxhY2UgPSBsb2NhdGlvbi5uYW1lO1xuICAgICAgICBsZXQgbG9jYXRpb25fbmFtZSA9IGxvY2F0aW9uLmxvY2F0aW9uX25hbWU7XG4gICAgICAgIGxldCByZXZpZXdfc2NvcmUgPSBsb2NhdGlvbi5yYXRpbmcgfHwgXCItXCI7XG4gICAgICAgIGxldCBwcmljZSA9IChsb2NhdGlvbi5kYXlfcHJpY2UpID8gJyQnICsgbG9jYXRpb24uZGF5X3ByaWNlICsgXCIvZGF5XCIgOiBcIlwiO1xuICAgICAgICBsZXQgaW1hZ2VfdXJsID0gbG9jYXRpb24uaW1hZ2VfdXJsc1swXTtcblxuICAgICAgICAkKCcucmVzdWx0cy1saXN0JykuYXBwZW5kKGA8bGkgXG4gICAgICAgIFx0aWQ9XCJsb2NhdGlvbi0ke2luZGV4fVwiIFxuICAgICAgICBcdGNsYXNzPVwicmVzdWx0LWl0ZW1cIiBcbiAgICAgICAgXHRzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6dXJsKCcke2ltYWdlX3VybH0nKVwiPlxuXHRcdFx0XHQ8dWwgY2xhc3M9XCJsb2NhdGlvbi1pbmZvXCI+XG5cdFx0XHRcdFx0PGxpPiR7d29ya3BsYWNlfTwvbGk+XG5cdFx0XHRcdFx0PGxpPiR7bG9jYXRpb25fbmFtZX08L2xpPlxuXHRcdFx0XHRcdDxsaT5TY29yZTogJHtyZXZpZXdfc2NvcmV9PC9saT5cblx0XHRcdFx0XHQ8bGk+JHtwcmljZX08L2xpPlxuXHRcdFx0XHQ8L3VsPlxuXHRcdFx0PC9saT5gKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0RXZlbnRIYW5kbGVycygpIHtcblx0Ly8gU2VhcmNoIGZvcm1cblx0JCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtJykuc3VibWl0KGZ1bmN0aW9uKGUpIHtcblx0ICAgIGxldCBzZWFyY2hfaW5xdWlyeSA9ICQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCk7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICBjb25zb2xlLmxvZyhzZWFyY2hfaW5xdWlyeSk7XG5cdCAgICBwcm9jZXNzU2VhcmNoKHNlYXJjaF9pbnF1aXJ5KTtcblx0ICAgICQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKFwiXCIpO1xuXHR9KTtcblxuXHQvLyBTZWFyY2ggZm9ybSBwcmVkaWN0aXZlIHNlYXJjaFxuXHQkKCcjbG9jYXRpb24tc2VhcmNoLWZvcm0gaW5wdXRbdHlwZT1cInRleHRcIl0nKS5mb2N1cyhmdW5jdGlvbigpIHtcblx0XHQkKCcjbG9jYXRpb24tc2VhcmNoLWZvcm0gaW5wdXRbdHlwZT1cInRleHRcIl0nKS5rZXlkb3duKGZ1bmN0aW9uKGUpIHtcblx0XHRcdGxldCBzZWFyY2hfaW5xdWlyeSA9ICQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbCgpO1xuXHRcdFx0IGNvbnNvbGUubG9nKHNlYXJjaF9pbnF1aXJ5KTtcblx0XHRcdHByZWRpY3RTZWFyY2goc2VhcmNoX2lucXVpcnkpO1xuXHRcdFx0JCgnLnByZWRpY3RpdmUtYm94Jykuc2hvdygpO1xuXHRcdH0pXG5cdH0pO1xuXG5cdCQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmZvY3VzKGZ1bmN0aW9uKCkge1xuXHRcdCQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmtleWRvd24oZnVuY3Rpb24oZSkge1xuXHRcdFx0bGV0IHNlYXJjaF9pbnF1aXJ5ID0gJCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCk7XG5cdFx0XHQgY29uc29sZS5sb2coc2VhcmNoX2lucXVpcnkpO1xuXHRcdFx0cHJlZGljdFNlYXJjaChzZWFyY2hfaW5xdWlyeSk7XG5cdFx0XHQkKCcucHJlZGljdGl2ZS1ib3gnKS5zaG93KCk7XG5cdFx0fSlcblx0fSk7XG5cblx0JCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XG5cdFx0JCgnLnByZWRpY3RpdmUtYm94JykuaGlkZSgpO1xuXHR9KTtcblxuXHQkKCcucHJlZGljdGl2ZS1pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLnByZWRpY3RpdmUtcmVzdWx0cycpLmh0bWwoXCJcIik7XG5cdFx0cHJvY2Vzc1NlYXJjaCgkKHRoaXMpLmRhdGEoJ25hbWUnKSk7XG5cdFx0JCgnLnByZWRpY3RpdmUtYm94JykuaGlkZSgpO1xuXHR9KVx0XG59XG5cbnZhciBhcHAgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICQud2hlbihnZXREYXRhKCkpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBcdGNvbnNvbGUubG9nKCdSZXRyaWV2ZWQgZGF0YScuIGRhdGEpO1xuICAgICAgICBcdGFwcC5tb2RlbCA9IGRhdGE7XG4gICAgICAgIFx0bGV0IGxvY2F0aW9ucyA9IGRhdGEucm93cy5zbGljZSgwLCBtYXhfcmVzdWx0cyk7IC8vIFNob3cgXG4gICAgICAgIFx0bGV0IG1haW5faW1hZ2VzID0gbG9jYXRpb25zWzBdLmltYWdlX3VybHMuY29uY2F0KGxvY2F0aW9uc1swXS5pbWFnZV91cmxzMik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb21wb25lbnRzXG4gICAgICAgICAgICBhcHAubWFpbl9jYXJvdXNlbCA9IGNyZWF0ZUNhcm91c2VsKCdjYXJvdXNlbCcsbWFpbl9pbWFnZXMpO1xuICAgICAgICBcdHVwZGF0ZVJlc3VsdHMobG9jYXRpb25zKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0RXZlbnRIYW5kbGVycygpO1xuICAgIH0sXG4gICAgXG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGFwcC5pbml0KCk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
