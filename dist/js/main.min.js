"use strict";function getData(){return $.ajax({dataType:"json",url:"https://www.deskbookers.com/nl-nl/sajax.json?q=Amsterdam&type=-&people=any&favorite=0&pid=&sw=52.293753%2C4.634942&ne=52.455562%2C5.162286&ids=17201%2C19640%2C13692%2C13691%2C12136%2C17938%2C15292%2C14886%2C14885%2C14884%2C14883%2C15730%2C15353%2C15351%2C15330%2C15080%2C17290%2C15454%2C15451%2C15379"})}function createCarousel(t,e){function n(){var t='\n\t\t\t<div class="control-wrapper left">\n\t\t\t\t<div class="control left-control">\n\t\t\t\t\t<i class="fa fa-chevron-left" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="control-wrapper right">\n\t\t\t\t<div class="control right-control">\n\t\t\t\t\t<i class="fa fa-chevron-right" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t';o.append(t),o.find(".right-control").on("click",function(){app.components.carousel.nextImage()}),o.find(".left-control").on("click",function(){app.components.carousel.prevImage()})}var o=$(t);return o.current=0,o.images=e,o.goToImage=function(t){console.log("Go to image",t),$(".carousel-item").fadeOut(),$('.carousel-item[data-id="'+t+'"]').fadeIn(),0===o.images.length?o.find(".control").hide():0===o.current?(o.find(".left-control").hide(),o.find(".right-control").show()):o.current===o.images.length-1?(o.find(".left-control").show(),o.find(".right-control").hide()):(console.log("show both"),o.find(".control").show())},o.updateImages=function(t){o.images=t,t.map(function(t,e){o.find("ul").append('\n\t\t\t\t\t<li id="image-'+e+'" \n\t\t\t\t\t\tdata-id="'+e+'" \n\t\t\t\t\t\tclass="carousel-item" \n\t\t\t\t\t\tstyle="background-image:url(\''+t+"')\"></li>\n\t\t\t\t")}),o.goToImage(0)},o.nextImage=function(){console.log("Go to image"),o.images[o.current+1]&&o.goToImage(o.current++)},o.prevImage=function(){o.images[o.current-1]&&o.goToImage(o.current--)},n(),o.append("<ul></ul>"),o.updateImages(e),o}function setEventHandlers(){$("#location-search-form").submit(function(t){var e=$('input[type="text"]').val();t.preventDefault(),console.log(e),processSearch(e),$('input[type="text"]').val("")}),$('#location-search-form input[type="text"]').focus(function(){$('#location-search-form input[type="text"]').keydown(function(t){var e=$('#location-search-form input[type="text"]').val();console.log(e),predictSearch(e),$(".predictive-box").show()})}),$(".predictive-item").on("click",function(){$(".predictive-results").html(""),processSearch($(this).data("name")),$(".predictive-box").hide()})}function predictSearch(t){var e=app.model.rows;e.sort(function(t,e){return t.name.localeCompare(e.name)});var n=e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});fillPredictor(".predictive-results",n.slice(0,5))}function fillPredictor(t,e){var n=$(t);n.html(""),console.log(e);var o=!0,a=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var c=r.value;n.append('\n\t\t\t<li data-id="'+c.location_id+'" \n\t\t\t\tclass="predictive-item"\n\t\t\t\tdata-name="'+c.name+'">'+c.name+"</li>")}}catch(s){a=!0,i=s}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw i}}}function processSearch(t){console.log(t),$('#location-search-form input[type="text"]').val("")}function updateResults(t){t.map(function(t,e){var n=t.name,o=t.location_name,a=t.rating||"-",i=t.day_price?"$"+t.day_price+"/day":"",r=t.image_urls[0];$(".results-list").append('<li \n        \tid="location-'+e+'" \n        \tclass="result-item" \n        \tstyle="background-image:url(\''+r+'\')">\n\t\t\t\t<ul class="location-info">\n\t\t\t\t\t<li>'+n+"</li>\n\t\t\t\t\t<li>"+o+"</li>\n\t\t\t\t\t<li>Score: "+a+"</li>\n\t\t\t\t\t<li>"+i+"</li>\n\t\t\t\t</ul>\n\t\t\t</li>")})}var max_results=5,app={init:function(){$.when(getData()).then(function(t){console.log("Retrieved data".data),app.model=t;var e=t.rows.slice(0,max_results),n=e[0].image_urls.concat(e[0].image_urls2);app.main_carousel=createCarousel("carousel",n),updateResults(e)}),setEventHandlers()}};$(document).ready(function(){app.init()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJnZXREYXRhIiwiJCIsImFqYXgiLCJkYXRhVHlwZSIsInVybCIsImNyZWF0ZUNhcm91c2VsIiwiZWxlbWVudCIsImltYWdlX2FyciIsImNyZWF0ZUNvbnRyb2xzIiwidGVtcGxhdGUiLCIkY2Fyb3VzZWwiLCJhcHBlbmQiLCJmaW5kIiwib24iLCJhcHAiLCJjb21wb25lbnRzIiwiY2Fyb3VzZWwiLCJuZXh0SW1hZ2UiLCJwcmV2SW1hZ2UiLCJjdXJyZW50IiwiaW1hZ2VzIiwiZ29Ub0ltYWdlIiwiaW5kZXgiLCJjb25zb2xlIiwibG9nIiwiZmFkZU91dCIsImZhZGVJbiIsImxlbmd0aCIsImhpZGUiLCJzaG93IiwidXBkYXRlSW1hZ2VzIiwibWFwIiwic2V0RXZlbnRIYW5kbGVycyIsInN1Ym1pdCIsImUiLCJzZWFyY2hfaW5xdWlyeSIsInZhbCIsInByZXZlbnREZWZhdWx0IiwicHJvY2Vzc1NlYXJjaCIsImZvY3VzIiwia2V5ZG93biIsInByZWRpY3RTZWFyY2giLCJodG1sIiwidGhpcyIsImRhdGEiLCJzdHIiLCJsb2NhdGlvbnMiLCJtb2RlbCIsInJvd3MiLCJzb3J0IiwiYSIsImIiLCJuYW1lIiwibG9jYWxlQ29tcGFyZSIsInJlc3VsdHMiLCJmaWx0ZXIiLCJwbGFjZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmaWxsUHJlZGljdG9yIiwic2xpY2UiLCJhcnIiLCIkcHJlZGljdG9yIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJsb2NhdGlvbiIsInZhbHVlIiwibG9jYXRpb25faWQiLCJlcnIiLCJ1cGRhdGVSZXN1bHRzIiwid29ya3BsYWNlIiwibG9jYXRpb25fbmFtZSIsInJldmlld19zY29yZSIsInJhdGluZyIsInByaWNlIiwiZGF5X3ByaWNlIiwiaW1hZ2VfdXJsIiwiaW1hZ2VfdXJscyIsIm1heF9yZXN1bHRzIiwiaW5pdCIsIndoZW4iLCJ0aGVuIiwibWFpbl9pbWFnZXMiLCJjb25jYXQiLCJpbWFnZV91cmxzMiIsIm1haW5fY2Fyb3VzZWwiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLFdBQ0wsTUFBT0MsR0FBRUMsTUFDTEMsU0FBVSxPQUNWQyxJQUFLLGlUQUliLFFBQVNDLGdCQUFlQyxFQUFTQyxHQU1oQyxRQUFTQyxLQUNSLEdBQUlDLEdBQUFBLHFYQWFKQyxHQUFVQyxPQUFPRixHQUVqQkMsRUFBVUUsS0FBSyxrQkFBa0JDLEdBQUcsUUFBUyxXQUM1Q0MsSUFBSUMsV0FBV0MsU0FBU0MsY0FHekJQLEVBQVVFLEtBQUssaUJBQWlCQyxHQUFHLFFBQVMsV0FDM0NDLElBQUlDLFdBQVdDLFNBQVNFLGNBekIxQixHQUFJUixHQUFZVCxFQUFFSyxFQWlGbEIsT0FoRkFJLEdBQVVTLFFBQVUsRUFDcEJULEVBQVVVLE9BQVNiLEVBMkJuQkcsRUFBVVcsVUFBWSxTQUFTQyxHQUM5QkMsUUFBUUMsSUFBSSxjQUFlRixHQUMzQnJCLEVBQUUsa0JBQWtCd0IsVUFDcEJ4QixFQUFBQSwyQkFBNkJxQixFQUE3QixNQUF3Q0ksU0FFVCxJQUE1QmhCLEVBQVVVLE9BQU9PLE9BQ25CakIsRUFBVUUsS0FBSyxZQUFZZ0IsT0FFRSxJQUF0QmxCLEVBQVVTLFNBQ2pCVCxFQUFVRSxLQUFLLGlCQUFpQmdCLE9BQ2hDbEIsRUFBVUUsS0FBSyxrQkFBa0JpQixRQUV6Qm5CLEVBQVVTLFVBQVlULEVBQVVVLE9BQU9PLE9BQVMsR0FDeERqQixFQUFVRSxLQUFLLGlCQUFpQmlCLE9BQ2hDbkIsRUFBVUUsS0FBSyxrQkFBa0JnQixTQUdqQ0wsUUFBUUMsSUFBSSxhQUNaZCxFQUFVRSxLQUFLLFlBQVlpQixTQUk3Qm5CLEVBQVVvQixhQUFlLFNBQVNWLEdBQ2pDVixFQUFVVSxPQUFTQSxF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S0FBTSxXQUNGdEYsRUFBRXVGLEtBQUt4RixXQUFXeUYsS0FBSyxTQUFTN0MsR0FDL0JyQixRQUFRQyxJQUFJLGlCQUFrQm9CLE1BQzlCOUIsSUFBSWlDLE1BQVFILENBQ1osSUFBSUUsR0FBWUYsRUFBS0ksS0FBS1ksTUFBTSxFQUFHMEIsYUFDL0JJLEVBQWM1QyxFQUFVLEdBQUd1QyxXQUFXTSxPQUFPN0MsRUFBVSxHQUFHOEMsWUFHM0Q5RSxLQUFJK0UsY0FBZ0J4RixlQUFlLFdBQVdxRixHQUNqRGIsY0FBYy9CLEtBR2ZkLG9CQUlSL0IsR0FBRTZGLFVBQVVDLE1BQU0sV0FDZGpGLElBQUl5RSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgbWF4X3Jlc3VsdHMgPSA1O1xuXG5mdW5jdGlvbiBnZXREYXRhKCkge1xuICAgIHJldHVybiAkLmFqYXgoe1xuICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vd3d3LmRlc2tib29rZXJzLmNvbS9ubC1ubC9zYWpheC5qc29uP3E9QW1zdGVyZGFtJnR5cGU9LSZwZW9wbGU9YW55JmZhdm9yaXRlPTAmcGlkPSZzdz01Mi4yOTM3NTMlMkM0LjYzNDk0MiZuZT01Mi40NTU1NjIlMkM1LjE2MjI4NiZpZHM9MTcyMDElMkMxOTY0MCUyQzEzNjkyJTJDMTM2OTElMkMxMjEzNiUyQzE3OTM4JTJDMTUyOTIlMkMxNDg4NiUyQzE0ODg1JTJDMTQ4ODQlMkMxNDg4MyUyQzE1NzMwJTJDMTUzNTMlMkMxNTM1MSUyQzE1MzMwJTJDMTUwODAlMkMxNzI5MCUyQzE1NDU0JTJDMTU0NTElMkMxNTM3OSdcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2Fyb3VzZWwoZWxlbWVudCwgaW1hZ2VfYXJyKSB7XG5cblx0dmFyICRjYXJvdXNlbCA9ICQoZWxlbWVudCk7XG5cdCRjYXJvdXNlbC5jdXJyZW50ID0gMDsgLy8gXG5cdCRjYXJvdXNlbC5pbWFnZXMgPSBpbWFnZV9hcnI7XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDb250cm9scygpIHtcblx0XHR2YXIgdGVtcGxhdGUgPSBgXG5cdFx0XHQ8ZGl2IGNsYXNzPVwiY29udHJvbC13cmFwcGVyIGxlZnRcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRyb2wgbGVmdC1jb250cm9sXCI+XG5cdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1jaGV2cm9uLWxlZnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwiY29udHJvbC13cmFwcGVyIHJpZ2h0XCI+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sIHJpZ2h0LWNvbnRyb2xcIj5cblx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tcmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0YDtcblxuXHRcdCRjYXJvdXNlbC5hcHBlbmQodGVtcGxhdGUpO1xuXG5cdFx0JGNhcm91c2VsLmZpbmQoJy5yaWdodC1jb250cm9sJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRhcHAuY29tcG9uZW50cy5jYXJvdXNlbC5uZXh0SW1hZ2UoKTtcblx0XHR9KTtcblxuXHRcdCRjYXJvdXNlbC5maW5kKCcubGVmdC1jb250cm9sJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRhcHAuY29tcG9uZW50cy5jYXJvdXNlbC5wcmV2SW1hZ2UoKTtcblx0XHR9KTtcblx0fVxuXG5cdCRjYXJvdXNlbC5nb1RvSW1hZ2UgPSBmdW5jdGlvbihpbmRleCkge1xuXHRcdGNvbnNvbGUubG9nKCdHbyB0byBpbWFnZScsIGluZGV4KTtcblx0XHQkKCcuY2Fyb3VzZWwtaXRlbScpLmZhZGVPdXQoKTtcblx0XHQkKGAuY2Fyb3VzZWwtaXRlbVtkYXRhLWlkPVwiJHtpbmRleH1cIl1gKS5mYWRlSW4oKTtcblxuXHRcdGlmKCRjYXJvdXNlbC5pbWFnZXMubGVuZ3RoID09PSAwICkge1xuXHRcdFx0JGNhcm91c2VsLmZpbmQoJy5jb250cm9sJykuaGlkZSgpO1xuXHRcdH1cblx0XHRlbHNlIGlmKCRjYXJvdXNlbC5jdXJyZW50ID09PSAwKSB7XG5cdFx0XHQkY2Fyb3VzZWwuZmluZCgnLmxlZnQtY29udHJvbCcpLmhpZGUoKTtcblx0XHRcdCRjYXJvdXNlbC5maW5kKCcucmlnaHQtY29udHJvbCcpLnNob3coKTtcblx0XHR9IFxuXHRcdGVsc2UgaWYgKCRjYXJvdXNlbC5jdXJyZW50ID09PSAkY2Fyb3VzZWwuaW1hZ2VzLmxlbmd0aCAtIDEpIHtcblx0XHRcdCRjYXJvdXNlbC5maW5kKCcubGVmdC1jb250cm9sJykuc2hvdygpO1xuXHRcdFx0JGNhcm91c2VsLmZpbmQoJy5yaWdodC1jb250cm9sJykuaGlkZSgpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKCdzaG93IGJvdGgnKTtcblx0XHRcdCRjYXJvdXNlbC5maW5kKCcuY29udHJvbCcpLnNob3coKTtcblx0XHR9XG5cdH1cblxuXHQkY2Fyb3VzZWwudXBkYXRlSW1hZ2VzID0gZnVuY3Rpb24oaW1hZ2VzKSB7XG5cdFx0JGNhcm91c2VsLmltYWdlcyA9IGltYWdlcztcbiAgICAgICAgaW1hZ2VzLm1hcChmdW5jdGlvbih1cmwsIGluZGV4KSB7XG4gICAgICAgICAgICAkY2Fyb3VzZWwuZmluZCgndWwnKS5hcHBlbmQoYFxuXHRcdFx0XHRcdDxsaSBpZD1cImltYWdlLSR7aW5kZXh9XCIgXG5cdFx0XHRcdFx0XHRkYXRhLWlkPVwiJHtpbmRleH1cIiBcblx0XHRcdFx0XHRcdGNsYXNzPVwiY2Fyb3VzZWwtaXRlbVwiIFxuXHRcdFx0XHRcdFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHt1cmx9JylcIj48L2xpPlxuXHRcdFx0XHRgKTtcbiAgICAgICAgfSk7XG4gICAgICAgICRjYXJvdXNlbC5nb1RvSW1hZ2UoMCk7XG5cdH1cblxuXHQkY2Fyb3VzZWwubmV4dEltYWdlID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29uc29sZS5sb2coJ0dvIHRvIGltYWdlJyk7XG5cdFx0aWYgKCRjYXJvdXNlbC5pbWFnZXNbJGNhcm91c2VsLmN1cnJlbnQgKyAxXSkge1xuXHRcdFx0JGNhcm91c2VsLmdvVG9JbWFnZSgkY2Fyb3VzZWwuY3VycmVudCsrKTtcblx0XHR9XHRcblx0fVxuXG5cdCRjYXJvdXNlbC5wcmV2SW1hZ2UgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoJGNhcm91c2VsLmltYWdlc1skY2Fyb3VzZWwuY3VycmVudCAtIDFdKSB7XG5cdFx0XHQkY2Fyb3VzZWwuZ29Ub0ltYWdlKCRjYXJvdXNlbC5jdXJyZW50LS0pO1xuXHRcdH1cblx0fVxuXG5cdGNyZWF0ZUNvbnRyb2xzKCk7XG5cdCRjYXJvdXNlbC5hcHBlbmQoJzx1bD48L3VsPicpO1xuXHQkY2Fyb3VzZWwudXBkYXRlSW1hZ2VzKGltYWdlX2FycilcblxuXHRyZXR1cm4gJGNhcm91c2VsO1xufVxuXG5mdW5jdGlvbiBzZXRFdmVudEhhbmRsZXJzKCkge1xuXHQvLyBTZWFyY2ggZm9ybVxuXHQkKCcjbG9jYXRpb24tc2VhcmNoLWZvcm0nKS5zdWJtaXQoZnVuY3Rpb24oZSkge1xuXHQgICAgbGV0IHNlYXJjaF9pbnF1aXJ5ID0gJCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKTtcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgIGNvbnNvbGUubG9nKHNlYXJjaF9pbnF1aXJ5KTtcblx0ICAgIHByb2Nlc3NTZWFyY2goc2VhcmNoX2lucXVpcnkpO1xuXHQgICAgJCgnaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoXCJcIik7XG5cdH0pO1xuXG5cdC8vIFNlYXJjaCBmb3JtIHByZWRpY3RpdmUgc2VhcmNoXG5cdCQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmZvY3VzKGZ1bmN0aW9uKCkge1xuXHRcdCQoJyNsb2NhdGlvbi1zZWFyY2gtZm9ybSBpbnB1dFt0eXBlPVwidGV4dFwiXScpLmtleWRvd24oZnVuY3Rpb24oZSkge1xuXHRcdFx0bGV0IHNlYXJjaF9pbnF1aXJ5ID0gJCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCk7XG5cdFx0XHQgY29uc29sZS5sb2coc2VhcmNoX2lucXVpcnkpO1xuXHRcdFx0cHJlZGljdFNlYXJjaChzZWFyY2hfaW5xdWlyeSk7XG5cdFx0XHQkKCcucHJlZGljdGl2ZS1ib3gnKS5zaG93KCk7XG5cdFx0fSlcblx0fSk7XG5cblx0JCgnLnByZWRpY3RpdmUtaXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5wcmVkaWN0aXZlLXJlc3VsdHMnKS5odG1sKFwiXCIpO1xuXHRcdHByb2Nlc3NTZWFyY2goJCh0aGlzKS5kYXRhKCduYW1lJykpO1xuXHRcdCQoJy5wcmVkaWN0aXZlLWJveCcpLmhpZGUoKTtcblx0fSlcdFxufVxuXG5mdW5jdGlvbiBwcmVkaWN0U2VhcmNoKHN0cikge1xuXHRsZXQgbG9jYXRpb25zID0gYXBwLm1vZGVsLnJvd3M7XG5cdGxvY2F0aW9ucy5zb3J0KChhLGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXHRsZXQgcmVzdWx0cyA9IGxvY2F0aW9ucy5maWx0ZXIoZnVuY3Rpb24ocGxhY2UpIHtcblx0XHRyZXR1cm4gcGxhY2UubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN0ci50b0xvd2VyQ2FzZSgpKTtcblx0fSk7XG5cdGZpbGxQcmVkaWN0b3IoJy5wcmVkaWN0aXZlLXJlc3VsdHMnLCByZXN1bHRzLnNsaWNlKDAsNSkpO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJlZGljdG9yKGVsZW1lbnQsIGFycikge1xuXHR2YXIgJHByZWRpY3RvciA9ICQoZWxlbWVudCk7XG5cdCRwcmVkaWN0b3IuaHRtbChcIlwiKTtcblx0Y29uc29sZS5sb2coYXJyKTtcblx0Zm9yKGxldCBsb2NhdGlvbiBvZiBhcnIpIHtcblx0XHQkcHJlZGljdG9yLmFwcGVuZChgXG5cdFx0XHQ8bGkgZGF0YS1pZD1cIiR7bG9jYXRpb24ubG9jYXRpb25faWR9XCIgXG5cdFx0XHRcdGNsYXNzPVwicHJlZGljdGl2ZS1pdGVtXCJcblx0XHRcdFx0ZGF0YS1uYW1lPVwiJHtsb2NhdGlvbi5uYW1lfVwiPiR7bG9jYXRpb24ubmFtZX08L2xpPmBcblx0XHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1NlYXJjaChzdHIpIHtcblx0Y29uc29sZS5sb2coc3RyKTtcblx0JCgnI2xvY2F0aW9uLXNlYXJjaC1mb3JtIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKFwiXCIpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVSZXN1bHRzKGxvY2F0aW9ucykge1xuICAgIGxvY2F0aW9ucy5tYXAoZnVuY3Rpb24obG9jYXRpb24sIGluZGV4KSB7XG4gICAgICAgIGxldCB3b3JrcGxhY2UgPSBsb2NhdGlvbi5uYW1lO1xuICAgICAgICBsZXQgbG9jYXRpb25fbmFtZSA9IGxvY2F0aW9uLmxvY2F0aW9uX25hbWU7XG4gICAgICAgIGxldCByZXZpZXdfc2NvcmUgPSBsb2NhdGlvbi5yYXRpbmcgfHwgXCItXCI7XG4gICAgICAgIGxldCBwcmljZSA9IChsb2NhdGlvbi5kYXlfcHJpY2UpID8gJyQnICsgbG9jYXRpb24uZGF5X3ByaWNlICsgXCIvZGF5XCIgOiBcIlwiO1xuICAgICAgICBsZXQgaW1hZ2VfdXJsID0gbG9jYXRpb24uaW1hZ2VfdXJsc1swXTtcblxuICAgICAgICAkKCcucmVzdWx0cy1saXN0JykuYXBwZW5kKGA8bGkgXG4gICAgICAgIFx0aWQ9XCJsb2NhdGlvbi0ke2luZGV4fVwiIFxuICAgICAgICBcdGNsYXNzPVwicmVzdWx0LWl0ZW1cIiBcbiAgICAgICAgXHRzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6dXJsKCcke2ltYWdlX3VybH0nKVwiPlxuXHRcdFx0XHQ8dWwgY2xhc3M9XCJsb2NhdGlvbi1pbmZvXCI+XG5cdFx0XHRcdFx0PGxpPiR7d29ya3BsYWNlfTwvbGk+XG5cdFx0XHRcdFx0PGxpPiR7bG9jYXRpb25fbmFtZX08L2xpPlxuXHRcdFx0XHRcdDxsaT5TY29yZTogJHtyZXZpZXdfc2NvcmV9PC9saT5cblx0XHRcdFx0XHQ8bGk+JHtwcmljZX08L2xpPlxuXHRcdFx0XHQ8L3VsPlxuXHRcdFx0PC9saT5gKTtcbiAgICB9KTtcbn1cblxudmFyIGFwcCA9IHtcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgJC53aGVuKGdldERhdGEoKSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIFx0Y29uc29sZS5sb2coJ1JldHJpZXZlZCBkYXRhJy4gZGF0YSk7XG4gICAgICAgIFx0YXBwLm1vZGVsID0gZGF0YTtcbiAgICAgICAgXHRsZXQgbG9jYXRpb25zID0gZGF0YS5yb3dzLnNsaWNlKDAsIG1heF9yZXN1bHRzKTsgLy8gU2hvdyBcbiAgICAgICAgXHRsZXQgbWFpbl9pbWFnZXMgPSBsb2NhdGlvbnNbMF0uaW1hZ2VfdXJscy5jb25jYXQobG9jYXRpb25zWzBdLmltYWdlX3VybHMyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGFwcC5tYWluX2Nhcm91c2VsID0gY3JlYXRlQ2Fyb3VzZWwoJ2Nhcm91c2VsJyxtYWluX2ltYWdlcyk7XG4gICAgICAgIFx0dXBkYXRlUmVzdWx0cyhsb2NhdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXRFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBhcHAuaW5pdCgpO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
